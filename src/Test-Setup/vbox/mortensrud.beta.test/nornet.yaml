#                       _                                _   _          _         _            _   
#  _ __ ___   ___  _ __| |_ ___ _ __  ___ _ __ _   _  __| | | |__   ___| |_ __ _ | |_ ___  ___| |_ 
# | '_ ` _ \ / _ \| '__| __/ _ \ '_ \/ __| '__| | | |/ _` | | '_ \ / _ \ __/ _` || __/ _ \/ __| __|
# | | | | | | (_) | |  | ||  __/ | | \__ \ |  | |_| | (_| |_| |_) |  __/ || (_| || ||  __/\__ \ |_ 
# |_| |_| |_|\___/|_|   \__\___|_| |_|___/_|   \__,_|\__,_(_)_.__/ \___|\__\__,_(_)__\___||___/\__|
#                                                                                                  

network:
  version: 2
  renderer: networkd

  # ###### Interfaces #######################################################
  ethernets:
    enp3s0:
      match:
        name: enp3s0
      set-name: nornet

      # ====== Addresses ====================================================
      dhcp4: no
      accept-ra: no
      addresses:
        # ------ ISP #255-----------------------------------
        - 11.255.2.50/24
        - fd00:cafe:0:ff02::32/64
        # ------ ISP #254-----------------------------------
        - 11.254.2.50/24
        - fd00:cafe:0:fe02::32/64

      # ====== Routes =======================================================
      routes:
        # ------ ISP #255-----------------------------------
        - to: default
          via: 11.255.2.1
          metric: 5
        - to: 11.255.2.0/24
          scope: link
          table: 1255
        - to: default
          via: 11.255.2.1
          table: 1255
        - to: default
          via: fd00:cafe:0:ff02::1
          metric: 5
        - to: fd00:cafe:0:ff02::/64
          scope: link
          table: 1255
        - to: default
          via: fd00:cafe:0:ff02::1
          table: 1255
        # ------ ISP #254-----------------------------------
        - to: default
          via: 11.254.2.1
          metric: 11
        - to: 11.254.2.0/24
          scope: link
          table: 1254
        - to: default
          via: 11.254.2.1
          table: 1254
        - to: default
          via: fd00:cafe:0:fe02::1
          metric: 11
        - to: fd00:cafe:0:fe02::/64
          scope: link
          table: 1254
        - to: default
          via: fd00:cafe:0:fe02::1
          table: 1254

      # ====== Routing Policy ===============================================
      routing-policy:
        # ------ ISP #255-----------------------------------
        - from: 11.255.2.0/24
          table: 1255
          priority: 355
        - from: fd00:cafe:0:ff02::/64
          table: 1255
          priority: 355
        # ------ ISP #254-----------------------------------
        - from: 11.254.2.0/24
          table: 1254
          priority: 354
        - from: fd00:cafe:0:fe02::/64
          table: 1254
          priority: 354

      # ====== DNS Servers ==================================================
      nameservers:
        addresses:
          - 11.255.2.1
          - fd00:cafe:0:ff02::1
        search:
          - beta.test
          - test
